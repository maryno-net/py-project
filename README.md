# Шаблонное приложение для Flask

## Зависимости

Для приложения _необходимо:_

* `python >= 3.4`

## Установка окружения для разработки

1. Клонируем шаблон в папку, где будет вестись разработка (`/path/to/project`)

2. Удаляем из репозитория данные о текущем апстриме.

    ```shell
    $ git remote remove origin
    ```

2. Перетименовываем проект. Для этого надо:

    * по всему проекту заменить строку `py_proj` на новое название проекта
    * переименовываем папку с базовым пакетом `py_proj` в новое название проекта

3. Разворачиваем окружение

    Cначала создаём и активируем виртуальное окружение. Очень важно обновить 
    `pip` и `setuptools`, т.к. иначе будут проблемы с установкой пакетов. Создаём
    виртуальное окружение в папке `env` в папке проекта (можно где угодно, но для
    простоты сделаем так). Папка уже есть в `.gitignore` проекта.

    ```shell
    $ cd /path/to/project
    $ mkdir venv
    $ python3 -m venv venv
    $ source venv/bin/activate
    $ pip install -U pip setuptools
    ```

    Дополнительная документация: https://docs.python.org/3.4/library/venv.html

    Потом разворачиваем само приложение. Для этого надо установить зависимости и 
    само приложение. `pip install -e .` установит приложение таким образом, что не
    надо будет его переустанавливать для внесений изменений в код. `[dev,test]`
    устанавливает дополнительные зависимости для разработки и тестирования.

    ```shell
    $ pip install -e .[dev,test]
    ```

    Теперь можно запускать сервер.

    ```shell
    $ py_proj server start
    ```

## Установка окружения при деплое в прод

1. Клонируем код в папку, где приложение будет находиться (`/path/to/project`)

2. Разворачиваем окружение

    ```shell
    $ cd /path/to/project
    $ mkdir venv
    $ python3 -m venv venv
    $ source env/bin/activate
    $ pip install -U pip setuptools
    $ pip install -e .
    ```

Для запуска сервера надо активировать венв и запустить его.

```shell
$ cd /path/to/project
$ source venv/bin/activate
$ <имя_проекта> server start
```
